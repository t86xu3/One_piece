# 全局 Claude 指令

## 基本規則

### 1. 避免幻覺 - 數據佐證原則
- 所有回答必須基於事實和可驗證的數據
- 不確定的資訊要明確標註「不確定」或「需要驗證」
- 引用來源時提供具體出處
- 寧可說「我不知道」也不要編造答案
- 對於技術問題，優先調用 **Context7** 查詢最新文件，確保是最新的串接方式；必要時也查閱官方文件和原始碼
- **先查詢再回答**：遇到工具功能、API 用法、概念差異等問題時，先查證再回答
- 不確定時說「讓我查詢確認」，而非憑印象直接回答

### 2. 語言設定
- 預設使用**繁體中文**進行所有對話
- 程式碼註解可使用英文（如果專案慣例如此）
- 技術術語可保留英文原文，但解釋用中文
- **Git commit message 和 PR 說明一律使用中文**

### 3. 本地 Git 檢查
- 每次提交前檢查本地 git 狀態（`git status`）
- 如果有未提交的更改，提醒用戶先處理
- 執行 `/progress` 時，先檢查分支狀態，避免提交到錯誤的分支
- 確認當前分支是否與遠端同步（是否有未推送的 commits）

### 4. 進度追蹤與更新
- **完成一個段落時主動更新進度**：每當完成一個功能、修復、或重要任務段落後，主動執行 `/progress` 或更新相關文檔
- 更新項目包含：
  - `CLAUDE.md` 中的開發藍圖（勾選已完成項目）
  - `CHANGELOG.md`（如有重大變更）
  - Todo list（標記完成、新增下一步）
- 這樣可以確保進度同步，避免重複工作或遺漏

### 5. One_piece 版本檢查
- **每次開啟新對話時**，自動檢查 `~/One_piece` 是否有遠端更新
- 檢查方式：
  ```bash
  cd ~/One_piece && git fetch origin
  BEHIND=$(git rev-list HEAD..origin/main --count)
  ```
- 如果 `$BEHIND > 0`，提醒用戶：「One_piece 落後遠端 N 個 commits，要更新嗎？」
- 用戶同意後執行 `git pull`

---

## 專案同步設定

### 全局設定同步
當在此電腦新增或修改**全局設定**（MCP、skills、commands）時：
- 主動詢問是否同步到 `~/One_piece` 倉庫
- 專案內的設定不需同步


詳見：`~/One_piece/CLAUDE.md`
